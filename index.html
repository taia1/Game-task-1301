<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مركز الروابط والمكافآت</title>
    <style>
        /* الحفاظ على التصميم الداكن الذي أرسلته */
        body { font-family: Arial, sans-serif; background-color: #121212; color: #E0E0E0; margin:0; padding:0; text-align:center;}
        .container { max-width:600px; margin:50px auto; padding:30px; background-color:#1E1E1E; border-radius:15px; box-shadow:0 4px 25px rgba(0,0,0,0.7);}
        h1 { color:#64ffda; font-size:26px; margin-bottom:20px; border-bottom:2px solid rgba(100,255,218,0.2); padding-bottom:10px;}
        .user-info { background-color:#2C2C2C; padding:20px; border-radius:10px; margin-bottom:25px; text-align:right; border:1px solid #64ffda;}
        .link-button { 
            display: block; 
            padding: 20px; 
            margin: 25px 0; 
            background-color: #FFD700; /* لون ذهبي جذاب */
            color: #121212; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 1.4em; 
            font-weight: bold; 
            text-decoration: none;
            transition: background-color 0.3s, transform 0.1s;
        }
        .link-button:hover { 
            background-color: #e0b400;
            transform: translateY(-2px);
        }
        .logout-btn { 
            background-color: #dc3545; color: white; padding: 8px 15px; 
            border: none; border-radius: 6px; cursor: pointer; font-size: 14px; 
            margin-top: 15px; transition: background-color 0.3s; 
        }
        .logout-btn:hover { background-color: #c82333; }
    </style>
</head>
<body>

<div class="container">
    <h1>مرحباً بك في Game Task</h1> 
    
    <div class="user-info">
        <p>أهلاً يا: <span id="username-display" style="color:#64ffda; font-weight:bold;">...</span></p>
        <button class="logout-btn" onclick="logout()">تسجيل الخروج</button>
    </div>

    <h2>اختر أحد المواقع لتبدأ الكسب:</h2>
    
    <button class="link-button" id="timebucks-btn">TimeBucks</button>
    
    <button class="link-button" id="gemsloot-btn">GemsLoot</button>

    <button class="link-button" id="freecash-btn">Freecash</button>

</div>

<script>
    // ** 1. إعدادات روابط الإحالة (Affiliate Links) **
    const affiliateLinks = {
        // الموقع 1: TimeBucks (رابط ثابت)
        timebucks: {
            name: "TimeBucks",
            url: "https://timebucks.com/?refID=227024124"
        },
        // الموقع 2: GemsLoot (يجب إضافة اسم المستخدم في نهايته)
        gemsloot: {
            name: "GemsLoot",
            // نستخدم هذا الجزء ونضيف إليه اسم المستخدم (username) لاحقاً
            url: "https://gemsloot.com/?aff=" 
        },
        // الموقع 3: Freecash (رابط ثابت)
        freecash: {
            name: "Freecash",
            url: "https://freecash.com/r/ST6JL"
        }
    };
    
    // ** 2. التحقق من حالة الدخول والمستخدم **
    const username = localStorage.getItem('username'); // نستخدم 'username' فقط
    
    if (!username) {
        // إذا لم يكن هناك اسم، أعد التوجيه لصفحة الدخول
        window.location.href = 'login.html'; 
    } else {
        document.getElementById('username-display').textContent = username;
    }

    // ** 3. ربط الأزرار والمنطق **
    const timebucksBtn = document.getElementById('timebucks-btn');
    const gemslootBtn = document.getElementById('gemsloot-btn');
    const freecashBtn = document.getElementById('freecash-btn');

    // ** TimeBucks (رابط ثابت) **
    timebucksBtn.addEventListener('click', () => {
        window.open(affiliateLinks.timebucks.url, '_blank'); 
    });

    // ** GemsLoot (رابط متغير يتطلب إضافة اسم المستخدم) **
    gemslootBtn.addEventListener('click', () => {
        // هنا نقوم بدمج الرابط الثابت مع اسم المستخدم (username) لتكوين رابط الإحالة النهائي
        const finalUrl = affiliateLinks.gemsloot.url + username; 
        window.open(finalUrl, '_blank'); 
    });
    
    // ** Freecash (رابط ثابت) **
    freecashBtn.addEventListener('click', () => {
        window.open(affiliateLinks.freecash.url, '_blank'); 
    });

    // ** 4. وظيفة تسجيل الخروج البسيطة **
    function logout() {
        localStorage.removeItem('username'); // مسح الاسم فقط
        window.location.href = 'login.html';
    }
</script>

</body>
</html>
